{"ast":null,"code":"var _jsxFileName = \"/var/www/html/react_project/realchat/realtimechat/src/Pages/ChatroomPage.js\";\nimport React from \"react\";\nimport { withRouter } from \"react-router-dom\";\n\nconst ChatroomPage = ({\n  match,\n  socket\n}) => {\n  console.log(match);\n  const chatroomId = match.params.id;\n  const [messages, setMessages] = React.useState([]);\n  const messageRef = React.useRef();\n  const [userId, setUserId] = React.useState(\"\");\n\n  const sendMessage = () => {\n    if (socket) {\n      socket.emit(\"chatroomMessage\", {\n        chatroomId,\n        message: messageRef.current.value\n      });\n      messageRef.current.value = \"\";\n    }\n  };\n\n  React.useEffect(() => {\n    socket.emit(\"joinRoom\", {\n      chatroomId\n    });\n    socket.on(\"newMessage\", (message, userId, name) => {\n      const newMessages = [...messages, message];\n      setMessages(newMessages);\n    });\n    return () => {\n      socket.emit(\"leaveRoom\", {\n        chatroomId\n      });\n    };\n  }, []); //  \tReact.useEffect(() => {\n  //     if (socket) {\n  //       socket.emit(\"joinRoom\", {\n  //         chatroomId,\n  //       });\n  //     }\n  //     return () => {\n  //       //Component Unmount\n  //       if (socket) {\n  //         socket.emit(\"leaveRoom\", {\n  //           chatroomId,\n  //         });\n  //       }\n  //     };\n  //     //eslint-disable-next-line\n  // }, []);\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"chatroomPage\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 12\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"chatroomSection\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 10\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"cardHeader\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 12\n    }\n  }, \"Chatroom Name\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"chatroomContent\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 12\n    }\n  }, messages.map((message, i) => /*#__PURE__*/React.createElement(\"div\", {\n    key: i,\n    className: \"message\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 16\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: userId === message.userId ? \"ownMessage\" : \"otherMessage\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 18\n    }\n  }, message.name, \":\"), \" \", message.message))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"chatroomActions\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 12\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 14\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    name: \"message\",\n    placeholder: \"Say something!\",\n    ref: messageRef,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 16\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 14\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"join\",\n    onClick: sendMessage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 16\n    }\n  }, \"Send\")))));\n};\n\nexport default withRouter(ChatroomPage);","map":{"version":3,"sources":["/var/www/html/react_project/realchat/realtimechat/src/Pages/ChatroomPage.js"],"names":["React","withRouter","ChatroomPage","match","socket","console","log","chatroomId","params","id","messages","setMessages","useState","messageRef","useRef","userId","setUserId","sendMessage","emit","message","current","value","useEffect","on","name","newMessages","map","i"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { withRouter } from \"react-router-dom\";\n\n\nconst ChatroomPage = ({ match,socket }) => {\n\tconsole.log(match)\n  \tconst chatroomId = match.params.id;\n  \tconst [messages, setMessages] = React.useState([]);\n\tconst messageRef = React.useRef();\n\tconst [userId, setUserId] = React.useState(\"\");\n  \t\n\tconst sendMessage = () => {\n\t    if (socket) {\n\t      socket.emit(\"chatroomMessage\", {\n\t        chatroomId,\n\t        message: messageRef.current.value,\n\t      });\n\n\t      messageRef.current.value = \"\";\n\t    }\n  \t};\n\n  \tReact.useEffect(()=>{\n  \t\tsocket.emit(\"joinRoom\",{\n  \t\t\tchatroomId,\n  \t\t})\n \n  \t\tsocket.on(\"newMessage\", (message,userId,name) => {\n\t        const newMessages = [...messages, message];\n\t        setMessages(newMessages);\n\t    });\n\n  \t\treturn () => {\n  \t\t\tsocket.emit(\"leaveRoom\",{\n  \t\t\t\tchatroomId,\n  \t\t\t})\n  \t\t}\n  \t},[])\n\n\n //  \tReact.useEffect(() => {\n\t//     if (socket) {\n\t//       socket.emit(\"joinRoom\", {\n\t//         chatroomId,\n\t//       });\n\t//     }\n\n\t//     return () => {\n\t//       //Component Unmount\n\t//       if (socket) {\n\t//         socket.emit(\"leaveRoom\", {\n\t//           chatroomId,\n\t//         });\n\t//       }\n\t//     };\n\t//     //eslint-disable-next-line\n\t// }, []);\n\n  \treturn \t<div className=\"chatroomPage\">\n\t\t      \t<div className=\"chatroomSection\">\n\t\t\t        <div className=\"cardHeader\">Chatroom Name</div>\n\t\t\t        <div className=\"chatroomContent\">\n\t\t\t          {messages.map((message, i) => (\n\t\t\t            <div key={i} className=\"message\">\n\t\t\t              <span\n\t\t\t                className={\n\t\t\t                  userId === message.userId ? \"ownMessage\" : \"otherMessage\"\n\t\t\t                }\n\t\t\t              >\n\t\t\t                {message.name}:\n\t\t\t              </span>{\" \"}\n\t\t\t              {message.message}\n\t\t\t            </div>\n\t\t\t          ))}\n\t\t\t        </div>\n\t\t\t        <div className=\"chatroomActions\">\n\t\t\t          <div>\n\t\t\t            <input\n\t\t\t              type=\"text\"\n\t\t\t              name=\"message\"\n\t\t\t              placeholder=\"Say something!\"\n\t\t\t              ref={messageRef}\n\t\t\t            />\n\t\t\t          </div>\n\t\t\t          <div>\n\t\t\t            <button className=\"join\" onClick={sendMessage}>\n\t\t\t              Send\n\t\t\t            </button>\n\t\t\t          </div>\n\t\t\t        </div>\n\t\t      \t</div>\n\t    \t</div>;\n};\n\nexport default withRouter(ChatroomPage);"]},"metadata":{},"sourceType":"module"}