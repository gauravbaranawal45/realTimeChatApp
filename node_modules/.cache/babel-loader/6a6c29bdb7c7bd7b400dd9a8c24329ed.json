{"ast":null,"code":"import _objectWithoutProperties from\"/var/www/html/react_project/realchat/github/realTimeChatApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";import _slicedToArray from\"/var/www/html/react_project/realchat/github/realTimeChatApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from\"react\";import{BrowserRouter,Redirect,Switch,Route}from\"react-router-dom\";import Signin from'./Component/Auth/Signin';import Signup from'./Component/Auth/Signup';import Messenger from'./Component/Messenger/Messenger';import Profile from'./Component/Profile';import Demo from'./Component/Demo';import io from\"socket.io-client\";function App(){var _React$useState=React.useState(null),_React$useState2=_slicedToArray(_React$useState,2),socket=_React$useState2[0],setSocket=_React$useState2[1];var setupSocket=function setupSocket(){var AUTH=localStorage.getItem('__chatauth');var token=null;if(AUTH){token=JSON.parse(AUTH).token;}if(token&&!socket){var newSocket=io(\"http://localhost:8000\",{query:{token:token}});newSocket.on(\"disconnect\",function(){setSocket(null);setTimeout(setupSocket,3000);console.log(\"error\",\"Socket Disconnected!\");});newSocket.on(\"connect\",function(){console.log(\"success\",\"Socket Connected!\");});setSocket(newSocket);}};React.useEffect(function(){setupSocket();//eslint-disable-next-line\n},[]);// console.log(socket)\nreturn/*#__PURE__*/React.createElement(BrowserRouter,null,/*#__PURE__*/React.createElement(Switch,null,/*#__PURE__*/React.createElement(Route,{path:\"/demo\",component:Demo}),/*#__PURE__*/React.createElement(LoginRoute,{path:\"/\",component:Signin,exact:true}),/*#__PURE__*/React.createElement(LoginRoute,{path:\"/signin\",component:Signin,exact:true}),/*#__PURE__*/React.createElement(LoginRoute,{path:\"/signup\",component:Signup,exact:true}),/*#__PURE__*/React.createElement(Route,{path:\"/messenger/:id?/:cid?\",render:function render(){return/*#__PURE__*/React.createElement(Messenger,{socket:socket});},exact:true}),/*#__PURE__*/React.createElement(PrivateRoute,{path:\"/Profile\",component:Profile,exact:true})));}var PrivateRoute=function PrivateRoute(_ref){var Component=_ref.component,props=_objectWithoutProperties(_ref,[\"component\"]);var chatauth=localStorage.getItem('__chatauth');if(chatauth){return/*#__PURE__*/React.createElement(Route,Object.assign({},props,{render:function render(propsParams){return/*#__PURE__*/React.createElement(Component,propsParams);}}));}else{return/*#__PURE__*/React.createElement(Redirect,{to:{pathname:'/signin',state:{from:props.location.pathname}}});}};var LoginRoute=function LoginRoute(_ref2){var Component=_ref2.component,props=_objectWithoutProperties(_ref2,[\"component\"]);var chatauth=localStorage.getItem('__chatauth');if(!chatauth){return/*#__PURE__*/React.createElement(Route,Object.assign({},props,{render:function render(propsParams){return/*#__PURE__*/React.createElement(Component,propsParams);}}));}else{return/*#__PURE__*/React.createElement(Redirect,{to:{pathname:'/messenger',state:{from:props.location.pathname}}});}};var Changepage=function Changepage(_ref3){var Component=_ref3.component,props=_objectWithoutProperties(_ref3,[\"component\"]);var chatauth=localStorage.getItem('__chatauth');if(!chatauth){return/*#__PURE__*/React.createElement(Redirect,{to:{pathname:'/signin',state:{from:props.location.pathname}}});}else{return/*#__PURE__*/React.createElement(Redirect,{to:{pathname:'/messenger',state:{from:props.location.pathname}}});}};export default App;","map":{"version":3,"sources":["/var/www/html/react_project/realchat/github/realTimeChatApp/src/App.js"],"names":["React","BrowserRouter","Redirect","Switch","Route","Signin","Signup","Messenger","Profile","Demo","io","App","useState","socket","setSocket","setupSocket","AUTH","localStorage","getItem","token","JSON","parse","newSocket","query","on","setTimeout","console","log","useEffect","PrivateRoute","Component","component","props","chatauth","propsParams","pathname","state","from","location","LoginRoute","Changepage"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { BrowserRouter, Redirect,Switch, Route } from \"react-router-dom\";\nimport Signin from './Component/Auth/Signin'\nimport Signup from './Component/Auth/Signup'\nimport Messenger from './Component/Messenger/Messenger'\nimport Profile from './Component/Profile'\n\nimport Demo from './Component/Demo'\n\n\nimport io from \"socket.io-client\";\n\n\nfunction App() {\n\n  const [socket, setSocket] = React.useState(null);\n\n  const setupSocket = () => {\n    let AUTH = localStorage.getItem('__chatauth')\n    let token = null;\n    if(AUTH){\n      token = JSON.parse(AUTH).token;  \n    }\n    if (token && !socket) {\n      const newSocket = io(\"http://localhost:8000\", {\n        query: {\n          token: token,\n        },\n      });\n\n      newSocket.on(\"disconnect\", () => {\n        setSocket(null);\n        setTimeout(setupSocket, 3000);\n        console.log(\"error\", \"Socket Disconnected!\");\n      });\n\n      newSocket.on(\"connect\", () => {\n        console.log(\"success\", \"Socket Connected!\");\n      });\n\n      setSocket(newSocket);\n    }\n  };\n\n  React.useEffect(() => {\n    setupSocket();\n    //eslint-disable-next-line\n  }, []);\n\n  // console.log(socket)\n\n  return (\n    <BrowserRouter>\n      <Switch>\n      {/*<BrowserRouter basename=\"/realTimeChatApp\" />*/}\n        <Route path=\"/demo\" component={Demo}/>\n        {/*<Changepage path=\"/\" exact />*/}\n        <LoginRoute path=\"/\" component={Signin} exact />\n        <LoginRoute path=\"/signin\" component={Signin} exact />\n        <LoginRoute path=\"/signup\" component={Signup} exact />\n        <Route path=\"/messenger/:id?/:cid?\" render={() => <Messenger socket={socket} />} exact />\n        <PrivateRoute path=\"/Profile\" component={Profile} exact />\n      </Switch>\n    </BrowserRouter>\n  );\n}\n\nconst PrivateRoute = ({ component: Component, ...props }) => {\n    let chatauth = localStorage.getItem('__chatauth')\n    if(chatauth){\n      return <Route {...props} render={propsParams =><Component {...propsParams}/>}/>\n    } else {\n      return <Redirect to={{ pathname: '/signin', state: { from: props.location.pathname } }} />\n    }\n}\n\n\nconst LoginRoute = ({ component: Component, ...props }) => {\n    let chatauth = localStorage.getItem('__chatauth')\n    if(!chatauth){\n      return <Route {...props} render={propsParams =><Component {...propsParams}/>}/>\n    } else {\n      return <Redirect to={{ pathname: '/messenger', state: { from: props.location.pathname } }} />\n    }\n}\n\nconst Changepage  = ({ component: Component, ...props }) => {\n    let chatauth = localStorage.getItem('__chatauth')\n    if(!chatauth){\n      return <Redirect to={{ pathname: '/signin', state: { from: props.location.pathname } }} />\n    } else {\n      return <Redirect to={{ pathname: '/messenger', state: { from: props.location.pathname } }} />\n    }\n}\n\nexport default App;"]},"metadata":{},"sourceType":"module"}