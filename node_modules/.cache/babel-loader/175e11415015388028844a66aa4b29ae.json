{"ast":null,"code":"var _jsxFileName = \"/var/www/html/react_project/realchat/chatapp/src/Component/Messenger/index.js\";\nimport React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { withRouter } from \"react-router-dom\";\nimport Userlist from \"./Userlist\";\nimport Userchat from \"./Userchat\";\nimport { getuserlist, getalluser, addNewUser, getuserchat, sendmsg } from '../../actions/chatActions';\nimport './style.css';\n\nclass index extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      message: \"\",\n      userchat: [],\n      chatusers: [],\n      userList: [],\n      open: false,\n      searchkey: '',\n      searchpeopledata: [],\n      suggetionvalue: [],\n      alluser: []\n    };\n\n    this.onchangeHandler = val => {\n      this.setState({\n        message: val\n      });\n    };\n\n    this.sendmsg = e => {\n      e.preventDefault();\n      let payload = {\n        message: this.state.message,\n        attachmentName: '',\n        attachmentType: '',\n        channelId: this.props.match.params.cid,\n        receiver: this.props.match.params.id\n      };\n      this.props.sendmsg(payload);\n      this.setState({\n        message: \"\"\n      });\n    };\n  }\n\n  componentDidMount() {\n    this.props.getuserlist(this.props.history);\n    this.props.getalluser(); // this.props.getuserchat(this.props.match.params.cid)\n\n    let socket = this.props.socket;\n  }\n\n  componentDidUpdate(PrevProps) {\n    let socket = this.props.socket;\n\n    if (PrevProps.socket !== this.props.socket) {\n      let socket = this.props.socket; // console.log('qq',socket,this.props.match)\n\n      if (socket) {\n        socket.emit(\"getchat\", {\n          channelId: this.props.match.params.cid\n        });\n      }\n\n      if (socket) {\n        socket.on(\"usermsg\", message => {\n          // const newMessages = [...messages, message];\n          // setMessages(newMessages);\n          console.log('message', message);\n        });\n      }\n    }\n\n    if (PrevProps.match.params.cid !== this.props.match.params.cid) {\n      // this.props.getuserchat(this.props.match.params.cid)\n      if (socket) {\n        socket.on(\"usermsg\", message => {\n          // const newMessages = [...messages, message];\n          // setMessages(newMessages);\n          console.log('message', message);\n        });\n      }\n    }\n  }\n\n  render() {\n    // console.log(this.props.history)\n    // console.log(this.props.userchat)\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container-fluid h-100\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row justify-content-center h-100\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(Userlist, {\n      chatlistdata: this.props.chatlistdata,\n      addNewUser: this.props.addNewUser,\n      receiver: this.props.match.params.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 6\n      }\n    }), /*#__PURE__*/React.createElement(Userchat, {\n      userchat: this.props.userchat,\n      onchangeHandler: this.onchangeHandler,\n      message: this.state.message,\n      sendmsg: this.sendmsg,\n      receiver: this.props.match.params.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 6\n      }\n    })));\n  }\n\n}\n\nconst mapStateToProps = (state, ownProps) => {\n  return {\n    chatlistdata: state.chat,\n    userchat: state.chat.userchat\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    getuserlist: (payload, callback) => dispatch(getuserlist(payload, callback)),\n    getalluser: (payload, callback) => dispatch(getalluser(payload, callback)),\n    addNewUser: (payload, callback) => dispatch(addNewUser(payload, callback)),\n    getuserchat: (payload, callback) => dispatch(getuserchat(payload, callback)),\n    sendmsg: (payload, callback) => dispatch(sendmsg(payload, callback))\n  };\n};\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(index));","map":{"version":3,"sources":["/var/www/html/react_project/realchat/chatapp/src/Component/Messenger/index.js"],"names":["React","Component","connect","withRouter","Userlist","Userchat","getuserlist","getalluser","addNewUser","getuserchat","sendmsg","index","state","message","userchat","chatusers","userList","open","searchkey","searchpeopledata","suggetionvalue","alluser","onchangeHandler","val","setState","e","preventDefault","payload","attachmentName","attachmentType","channelId","props","match","params","cid","receiver","id","componentDidMount","history","socket","componentDidUpdate","PrevProps","emit","on","console","log","render","chatlistdata","mapStateToProps","ownProps","chat","mapDispatchToProps","dispatch","callback"],"mappings":"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","sourcesContent":["import React ,{Component} from \"react\";\nimport { connect } from \"react-redux\";\nimport {withRouter} from \"react-router-dom\";\nimport Userlist from \"./Userlist\";\nimport Userchat from \"./Userchat\";\nimport {getuserlist,getalluser,addNewUser,getuserchat,sendmsg} from '../../actions/chatActions'\nimport './style.css'\n\n\n\n\nclass index extends Component {\n\n\tstate = {\n\t\tmessage:\"\",\n\t    userchat:[],\n\t    chatusers:[],\n\t    userList:[],\n\t    open:false,\n\t    searchkey:'',\n\t    searchpeopledata:[],\n\t    suggetionvalue:[],\n\t    alluser:[],\n\t}\n\n\tcomponentDidMount(){\n\t    this.props.getuserlist(this.props.history)\n\t    this.props.getalluser()\n\t\t// this.props.getuserchat(this.props.match.params.cid)\n\t\tlet socket = this.props.socket;\n\t\t\n\t}\n\n\tcomponentDidUpdate(PrevProps){\n\t\tlet socket = this.props.socket;\n\t\tif(PrevProps.socket!==this.props.socket){\n\t\t\tlet socket = this.props.socket;\n\t\t\t// console.log('qq',socket,this.props.match)\n\t\t\tif (socket) {\n\t\t      \tsocket.emit(\"getchat\", {\n\t\t\t        channelId:this.props.match.params.cid,\n\t\t\t    });\n\t\t    }\n\n\t\t    if (socket) {\n\t\t      \tsocket.on(\"usermsg\", (message) => {\n\t\t        \t// const newMessages = [...messages, message];\n\t\t        \t// setMessages(newMessages);\n\t\t        \tconsole.log('message',message)\n\t\t      \t});\n\t\t    }\n\t\t}\n\t    if(PrevProps.match.params.cid!==this.props.match.params.cid){\n\t      \t// this.props.getuserchat(this.props.match.params.cid)\n\t      \tif (socket) {\n\t\t      \tsocket.on(\"usermsg\", (message) => {\n\t\t        \t// const newMessages = [...messages, message];\n\t\t        \t// setMessages(newMessages);\n\t\t        \tconsole.log('message',message)\n\t\t      \t});\n\t\t    }\n\t    }\n\t}\n\n\tonchangeHandler = (val) => {\n\t    this.setState({message:val})\n\t}\n\n\tsendmsg = (e) => {\n\t    e.preventDefault();\n\t    let payload = {\n\t\t\tmessage:this.state.message,\n\t\t\tattachmentName:'',\n\t\t\tattachmentType:'',\n\t\t\tchannelId:this.props.match.params.cid,\n\t\t\treceiver:this.props.match.params.id\n\t    }\n\t    this.props.sendmsg(payload)\n\t    this.setState({message:\"\"})\n\t}\n\n\n\n\trender(){\n\t\t// console.log(this.props.history)\n\t\t// console.log(this.props.userchat)\n\n\t\treturn (\n\t\t    <div className=\"container-fluid h-100\">\n\t\t\t\t<div className=\"row justify-content-center h-100\">\n\t\t\t\t\t<Userlist\n\t\t\t\t\t\tchatlistdata={this.props.chatlistdata}\n\t\t\t\t\t\taddNewUser={this.props.addNewUser}\n\t\t\t\t\t\treceiver={this.props.match.params.id}\n\t\t\t\t\t/>\n\t\t\t\t\t<Userchat\n\t\t\t\t\t\tuserchat={this.props.userchat}\n\t\t\t\t\t\tonchangeHandler={this.onchangeHandler}\n\t\t\t\t\t\tmessage={this.state.message}\n\t\t\t\t\t\tsendmsg={this.sendmsg}\n\t\t\t\t\t\treceiver={this.props.match.params.id}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t  );\t\n\t}\n  \t\n}\n\nconst mapStateToProps = (state, ownProps) => {\n    return {\n    \tchatlistdata:state.chat,\n    \tuserchat:state.chat.userchat,\n    }\n};\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        getuserlist: (payload,callback) => dispatch(getuserlist(payload,callback)),\n        getalluser: (payload,callback) => dispatch(getalluser(payload,callback)),\n        addNewUser: (payload,callback) => dispatch(addNewUser(payload,callback)),\n        getuserchat: (payload,callback) => dispatch(getuserchat(payload,callback)),\n        sendmsg: (payload,callback) => dispatch(sendmsg(payload,callback)),\n    };\n  };\n  \nexport default withRouter(connect(mapStateToProps,mapDispatchToProps)(index))"]},"metadata":{},"sourceType":"module"}